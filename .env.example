# =============================================================
# wa2fa — WhatsApp Cloud API Configuration
# =============================================================
# Copy this file to .env and fill in your real values.
#   cp .env.example .env
# =============================================================

# WhatsApp Business API access token (from Meta Business Manager)
WA2FA_ACCESS_TOKEN=EAAxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Phone Number ID (from WhatsApp > API Setup in Meta Business)
WA2FA_PHONE_NUMBER_ID=123456789012345

# Meta Graph API version
WA2FA_API_VERSION=v21.0

# Template names (must match the templates you created in Meta Business)
WA2FA_TEMPLATE_OTP=otp_message
WA2FA_TEMPLATE_LOGIN=login_notification

# Default language fallback (en, hi, es, fr, de, ar, pt)
WA2FA_DEFAULT_LANGUAGE=en

# Default country code (ISO-3166 alpha-2) for phone number validation.
# When set, phone numbers entered without the '+' international prefix
# will be tried with this country code before failing validation.
# Examples: IN (India), US (United States), DE (Germany), GB (UK)
# Leave empty to require '+' prefix on all phone numbers.
WA2FA_DEFAULT_COUNTRY_CODE=

# OTP expiry in seconds
WA2FA_OTP_EXPIRY=300

# Login notification settings
WA2FA_LOGIN_NOTIFICATION_ENABLED=true
WA2FA_LOGIN_NOTIFICATION_ASYNC=true

# =============================================================
# SMS Fallback (optional)
# =============================================================
# When the WhatsApp Cloud API fails (network issues, rate limits, etc.),
# the plugin can fall back to sending the message as a plain-text SMS
# via a configurable HTTP endpoint.
#
# How it works:
#   1. Set your base URL below — include any auth tokens, API keys, or
#      provider-specific params directly in the URL query string.
#   2. The plugin appends three additional query parameters:
#        to      = recipient phone number in E.164 format
#        content = plain-text message body (no HTML)
#        coding  = Data Coding Scheme (auto-detected from content)
#
# Example:
#   Base URL:  https://sms-gw.example.com/send?apiKey=abc123&sender=MyApp
#   Final URL: https://sms-gw.example.com/send?apiKey=abc123&sender=MyApp&to=%2B919876543210&content=Your+code+is+123456&coding=0
#
# Data Coding Schemes (DCS) — auto-detected, not configurable:
#   0 = GSM 7-bit default alphabet (Latin, 160 chars/segment)
#   8 = UCS-2 / UTF-16 (non-Latin: Hindi, Arabic, etc., 70 chars/segment)
#
# Leave WA2FA_SMS_FALLBACK_URL empty to disable SMS fallback.

# Base URL for SMS delivery (include auth/API keys as URL params)
WA2FA_SMS_FALLBACK_URL=

# HTTP method to call the SMS URL: GET or POST (params always in URL)
WA2FA_SMS_FALLBACK_METHOD=GET

# =============================================================
# QR Code Verification (optional)
# =============================================================
# Enables a "Scan QR Code" tab alongside the OTP input.
# Users scan a QR code that opens WhatsApp with a pre-filled
# verification message. The browser auto-detects when the
# message is received via webhook.
#
# Prerequisites:
#   1. Keycloak must be publicly reachable (or use ngrok for dev)
#   2. Configure a webhook in Meta Business Manager pointing to:
#      https://your-domain/realms/{realm}/wa2fa/webhook
#
# Set to true to enable QR code verification
WA2FA_QR_ENABLED=false

# Your WhatsApp Business phone number (used in wa.me deep links)
WA2FA_BUSINESS_PHONE=14155238886

# Secret token for Meta webhook verification (must match Meta config)
WA2FA_WEBHOOK_VERIFY_TOKEN=wa2fa-default-token

# Meta App Secret — REQUIRED for production.
# Used to verify X-Hub-Signature-256 on webhook POST requests.
# Prevents forged webhook payloads. Found in Meta App Dashboard > App Settings > Basic.
# If not set, webhook signature validation is SKIPPED (insecure).
WA2FA_APP_SECRET=

